2025 10 16  
CS 240  
Ken Rodham  
How to write quality source code  

# Code Quality

## Why quality code matters

- More time spent maintaining existing code than writing new code.
- Over time, multiple people will read and maintain a section of code
- Most of the time, we find ourselves working in green-field development. (Whatever tf that is. Maybe it was "ground-field development"? Idk.)

Creating software is a combination of engineering and art. Writing good source code is an artistic endeavor.

e.g.s of "art":

- Creating pleasing UX.
- Creating designs w/ desirable properties.
- Writing source code that is clear and obvious to the reader.

## Method Cohesion & Naming

### Method cohesion

- Just like classes, methods should be highly cohesive.
- A cohesive method does one and only one thing, and has a name that effectively describes what it does.
- Methods that do too much become obvious if we name them properly.
    - `doDishesAndWashClothesAndSweepFloor`

### Good method naming

A method name should clearly and completely describe what the method does.

- Non-void method names should be a verb or verb phrase. 
- Methods w/ return values should be named w/ either a verb/verb phrase, or a noun describing what it returns.
- Avoid meaningless verbs.
    - e.g. `handleCalculation`, `dealWithInput`, etc.
    - Avoid stuttering: `person.copyPerson(Person person)` vs. `person.clone()`.
- Don't abbreviate too much. Make method names long enough to be easily understood.
- Establishing a naming convention for methods.
    - e.g. Do you call it `add`/`remove` or `insert`/`delete`? It doesn't matter which you choose, but be consistent across all classes and files.
    - e.g. all bool functions start with `is`.
    - e.g. setters/getters start with `set`/`get`.

## When to make a new function

### 1. To decompose a larger function

Long/complicated funcs can be hard to understand. Here's things to consider when you're decomposing a too-long function.

- Factor out meaningful sections of code into well-named sub-methods.
- The original method becomes a "driver" that calls the sub-methods.
- Extracted methods may be placed on different classes.
    - (e.g., put sub methods on the class that contains the data they use.)
- Decomp continues until methods are sufficiently short and simple.

### 2. Avoiding code duplication

- One of the most important principles of software design.
- Duplicated code makes software maintenance more difficult and error-prone.

### 3. Deep Nesting

Whenever you nest, you make an indent. But every indent makes code to read.

- You should always indent when you nest. But excessive nesting of statements is one of the chief culprits of code.
- Avoid nesting more than three or four levels.
- Creating additional sub-methods is the best way to remove deep methods.

## Comments

- If you feel the need to have paragraphs of comments on a chunk of code, consider decomposing that code.
- Think about the future reader of the code: What will be confusing to them?
- Don't comment self-explanatory stuff.

## Method Parameters

- The more parameters a method has, the harder it is to understand.
- Fewer parameters is better.
- Rule-of-thumb: No more than 7 parameters, and that many even is rare.
- **Ideal order of parameters: in, in-out, out.**

## Initializing Data

- Initialize variables when they're declared.
- Declare variables close to where they're used.
    - Vars don't always have to be declared at the top of the method.
- Check for the need to re-initialize a variable.
    - Counters, accumulators, etc.
- Compiler warnings can help find uninitialized variables.
    - Java automatically intializes instance vars and doesn't allow you to use uninitialized local vars.

## Code Layout

The physical layout of code *strongly* affects readability.

### Whitespace

- Good layout makes the logical structure of a program clear to the reader.
- Good layout helps avoid introducing bugs when the code is modified.
- Be consistent: Pick a style you like and stick to it.

### Expressions

Arithmetic & logic expressions can be hard to udnerstand.

- Parenthesize arithmetic expressions.
    - Enhances readability.
    - Makes clear the order of ops.
- Insert spaces btwn operands, operators, and parentheses to enhance redability.

#### Separate Conditions

For if statements, if you're linking a bunch of expressions w/ `&&` and/or `||` operands, that gets hard to read fast. Here's ways to help with that:

- Put each expression on a different line.
- Assign bool vars for each expression just before the if statement, and have the if statement check those bools instead.
- Extract those expressions into their own functions.

### Curly Brace placement

Typically, do one of these:

```java
for (int i = 0; i < MAX; ++i) {
    values[i] = 0;
}
```

OR

```java
for (int i = 0; i < MAX; ++i) 
{
    values[i] = 0;
}
```

Different languages have different conventions. But really, at the end of the day, do whatever your employer's style guide demands. (Many employers even have tools that enforce style guides.)

#### Dropping curly braces

What about this?

```java
for (int i = 0; i < MAX; ++i)
    values[i] = 0;
```

Some people would say that's dangerous (e.g., what if you add a line underneath and forget). But Rodham said that in all his years programming, he's only encountered a problem like that once or twice. 

The CS 240 autograder will get dock you for not including curly braces, though.

### Method parameters

Put spaces between method parameters.


### One Statement per line

- Declare each var on a separate line.
    - More robust under modification.
    - Easier to understand.
- Don't put multiple statements on the same line.
    - Just don't do it, you fool.

### Wrapping long lines

Eventaully, you will run into lines of code that stretch way off your screen. 

- Wrapping btwn 80-100 characters is common.
    - I read somewhere that some (older) IDEs or compilers struggle with anything more than 80.
    - A max line length is necessary because everyone has different screens, so "I'll just go until it runs off my screen" is bad practice.
    - Max line length forces you not to nest too deeply.


#### Solution examples

```java
private boolean isNthDayOfWeekInMonth(Calendar date, int n,
                                    int dayOfWeek, int month) {

    ...

}
```

```java
DailySchedule newDailySchedule = 
    new DailySchedule(...);
```

## Naming

### Var names

- Don't make them long, nor too short.
- Are short vars always bad? No.
    - Loop control vars: `i`, `j`, `k`, `idx`, etc. is common.
        - i/j/k are common vars for loops bc they're common vars for summation in math. 
    - Temporar variables: `temp`.
    - Names that are naturally short: `x`, `y`, `z`.

### Naming Conventions

- Separating words w/in vars.
    - Camel case: Capitalize each new internal word.
        - Standard in Java.
    - "Snake case": Separate words with underscores.
        - Standard in Python and C.
    - Whichever you choose, be consistent.
- Conventions for Java that the CS240 autograder checks: 
    - First char of class names are upper-case.
    - First char of method names are lower-case.
    - First char of variable names are lower-case.
    - Constants are all caps, with underscores btwn words.

### Creating readable names

- Avoid words that are commonly misspelled.
- Avoid chars that are hard to distinguish (e.g. upper-case I and lower-case l).
- Avoid including numbers in names.
- Use Dr. Seuss naming only as a last resort.

### Abbreviation Guidelines

Only abbreviate when you have to. But if you have to, here's some methods to consider:

- Remove non-leading vowels. (Computer &rarr; Cmptr)
- Truncate (Calcuator &rarr; calc)

Uhhhh there was some stuff but he went by too fast.

# Style Checkers

Style checkers are (typically command-line) tools that look at your code and make sure it's not stupid.

Sometimes people call these programs LINTers.

IntelliJ has a style checker built in. You can run the checker when you'd like, and you can even change the settings of your project to reformat your code every time you save the file. (Settings > Tools > Actions on Save)

# Psuedo-Code

Back in the 1970s, pseudo-code was the rage. Every time you write a new function, they said, you should write in English, first, and then translate that to code. We no longer do that all the time, but that technique is still useful.

- Keep pseudo-code high level. Don't make it so close to code that you might as well have just wrote the code to begin with.